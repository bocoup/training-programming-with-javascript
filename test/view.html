<!doctype html>
<html>
<head>
  <meta charset='utf-8'>
  <link rel='stylesheet' href='../vendor/mocha/mocha.css'>
  <script src='../vendor/mocha/expect.js'></script>
  <script src='../vendor/mocha/mocha.js'></script>
  <script src='../vendor/jquery-2.1.0.js'></script>
  <script src='../vendor/fabric-1.4.4.js'></script>
  <script src='../app/lib/view.js'></script>
  <script src='//localhost:35729/livereload.js'></script>
  <script>
  mocha.setup('bdd');
  $(mocha.run);
  describe('Hangman.View', function() {
    var view;

    beforeEach(function () {
      view = new Hangman.View($('body'));
    });

    it('should create a fabric.Canvas instance on the first canvas found inside the provided element', function () {
      expect(view.canvas).to.be.a(fabric.Canvas);
    });

    it('should have a steps property which defines the order of drawings', function () {
      expect(view.steps).to.be.an('array')
    });

    describe('#draw', function () {
      it('should find and draw a requested item on the canvas', function () {
        var gallows = view.gallows();
        view.draw(gallows);
        expect(view.canvas._objects[0]).to.equal(gallows);
      });
      it('should be chainable', function () {
        expect(view.draw('gallows')).to.equal(view);
      })
    });

    describe('#showLetters', function () {
      it('should build the text inputs for the game board', function () {
        view.buildBoard({
          guessWordLetters: ['h','a','n','g','m','a','n'],
          hits: ['a'],
          misses: ['b']
        });

      });
      it('should be chainable', function () {
        expect(view.draw('gallows')).to.equal(view);
      })
    });

    describe('#gallows', function () {
      it('should return a fabric.Line representing to top of the gallows', function () {
        expect(view.gallows()).to.be.a(fabric.Line);
      });
    });

    describe('#noose', function () {
      it('should return a fabric.Line representing the noose', function () {
        expect(view.noose()).to.be.a(fabric.Line);
      });
    });

    describe('#head', function () {
      it('should return a fabric.Circle representing the hangman\'s head', function () {
        expect(view.head()).to.be.a(fabric.Circle);
      });
    });

    describe('#body', function () {
      it('should return a fabric.Line representing the hangman\'s body', function () {
        expect(view.body()).to.be.a(fabric.Line);
      });
    });

    describe('#leftArm', function () {
      it('should return a fabric.Line representing the hangman\'s left arm', function () {
        expect(view.leftArm()).to.be.a(fabric.Line);
      });
    });

    describe('#rightArm', function () {
      it('should return a fabric.Line representing the hangman\'s right arm', function () {
        expect(view.rightArm()).to.be.a(fabric.Line);
      });
    });

    describe('#leftLeg', function () {
      it('should return a fabric.Line representing the hangman\'s left leg', function () {
        expect(view.leftLeg()).to.be.a(fabric.Line);
      });
    });

    describe('#rightLeg', function () {
      it('should return a fabric.Line representing the hangman\'s right leg', function () {
        expect(view.rightLeg()).to.be.a(fabric.Line);
      });
    });

  });
  </script>
</head>
<body>
  <div id='mocha'></div>
  <div id='test'></div>
  <canvas width="580" height="450"></canvas>
</body>
</html>
